<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title> Profile </title>
  <link rel="stylesheet" href="css/cart.css">
  <link rel="stylesheet" href="css/style_drive.css">
  <!-- favicon -->
  <link rel="icon"
    href="https://yt3.ggpht.com/a/AGF-l78km1YyNXmF0r3-0CycCA0HLA_i6zYn_8NZEg=s900-c-k-c0xffffffff-no-rj-mo"
    type="image/gif" sizes="16x16">
  <!-- header links -->
  <script src="https://kit.fontawesome.com/4a3b1f73a2.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Lato&display=swap" rel="stylesheet">
  <style>
    .formDisp {
      display: block;
    }

    .formHide {
      display: none;
    }

    body {
      font-family: 'Lato', sans-serif;
      /* Consistent font across the page */
      background-color: #f7f7f7;
      /* Light background for contrast */
      margin: 0;
      padding: 20px;
      /* Add some space around the content */
    }

    .driveFormContainer {
      width: 100%;
      max-width: 400px;
      /* Set a maximum width */
      margin: auto;
      /* Center the form */
      padding: 30px;
      /* Increased padding */
      border: 1px solid #e0e0e0;
      /* Soft border */
      border-radius: 10px;
      /* Slightly more rounded corners */
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      /* Enhanced shadow */
      background-color: #ffffff;
      /* White background */
    }

    .driveFormContainer h3 {
      text-align: center;
      /* Center the heading */
      margin-bottom: 20px;
      /* Space below heading */
      color: #333;
      /* Darker text for contrast */
      font-size: 1.5em;
      /* Slightly larger font */
    }

    .form-control {
      width: 90%;
      /* Full width */
      padding: 12px;
      /* Ample padding */
      margin: 5px 0;
      /* Space between inputs */
      border: 1px solid #ccc;
      /* Standard border */
      border-radius: 5px;
      /* Rounded corners */
      font-size: 1em;
      /* Consistent font size */
      transition: border-color 0.3s;
      /* Smooth transition for focus */
    }

    .form-control:focus {
      border-color: #007bff;
      /* Blue border on focus */
      outline: none;
      /* Remove default outline */
    }

    .submit {
      background-color: #007bff;
      /* Primary button color */
      color: #ffffff;
      /* White text */
      text-align: center;
      /* Center text */
      padding: 12px;
      /* Consistent padding */
      margin: 20px 0;
      /* Space around the button */
      border-radius: 5px;
      /* Rounded corners */
      cursor: pointer;
      /* Pointer cursor */
      font-size: 1em;
      /* Consistent font size */
      transition: background-color 0.3s;
      /* Smooth transition */
    }

    .submit:hover {
      background-color: #0056b3;
      /* Darker shade on hover */
    }
  </style>
  <script>
    let pageInfo = {
      pageName: "credential_validation"
    }
    let credData = {
      credentials: {},
      txnId: ""
    }
  </script>
</head>

<body>
  <!-- HEADER -->
  <div id="1">

  </div>
  <script>
    load("header.html");
    function load(url) {
      req = new XMLHttpRequest();
      req.open("GET", url, false);
      req.send(null);
      document.getElementById(1).innerHTML = req.responseText;
    }
  </script>

  <!-- CART CONTAINER -->
  <div id="cartMainContainer">
    <div>
      <ul class="list">
        <li>
          <div class="driveFormContainer">
            <form id="SignUpForm" class="formDisp">
              <h3>Register</h3>
              <select class="title_a required form-control" name="salutation" id="salutation" style="width:95%">
                <option value="Mr." selected="selected">Mr.</option>
                <option value="Ms.">Ms.</option>
              </select>

              <div class="first_name">
                <!-- First Name*<br> -->
                <input type="text" name="firstname" placeholder="First Name" id="firstname"
                  class="required form-control textonly" />
              </div>
              <div class="last_name">
                <!--Last Name*<br>-->
                <input type="text" name="lastname" placeholder="Last Name" id="lastname"
                  class="required form-control textonly" />
              </div>
              <input type="email" placeholder="Email" required class="box form-control" id="reg_email" />
              <input type="password" placeholder="Password" required class="box form-control" id="reg_password" />
              <input type="number" placeholder="mobile" id="mobile" value="" class="form-control" />
              <input type="text" placeholder="India" id="country" class="form-control" value="India" disabled />
              <select name="cityid" id="cityid" class="title_name required form-control" style="width:95%">
                <option value="Chennai">Chennai</option>
                <option value="Delhi">Delhi</option>
                <option value="Kolkata" selected>Kolkata</option>
                <option value="Mumbai">Mumbai</option>
                <option value="Bengaluru">Bengaluru</option>
              </select>
              <!-- <button class="btn" onclick="setSession();">Submit</button> -->
              <p style="display:flex;justify-content: center; margin-top: 5px; margin-bottom: 15px;"
                onclick="switchCred(SignUpForm,SignInForm)">Already having account? Signin</p>
              <div class="submit" onclick="signup()">Signup</div>
            </form>
            <form id="SignInForm" class="formHide">
              <h3>Login</h3>
              <input type="email" class="form-control" placeholder="Email" required class="box" id="login_email" style="width:95%"/>
              <input type="password" class="form-control" placeholder="Password" required class="box" id="password" style="width:95%"/>
              <!-- <button class="btn" onclick="setSession();">Submit</button> -->
              <p style="display:flex;justify-content: center; margin-top: 5px; margin-bottom: 15px;"
                onclick="switchCred(SignInForm,SignUpForm)">Not having account? SignUp</p>
              <div class="submit">Login</div>
            </form>
            <form id="InfoForm" class="formHide">
              <h3 id="greet"></h3>
              <div class="submit" onclick="logout()">LogOut</div>
            </form>
          </div>
        </li>
      </ul>
    </div>

  </div>

</body>
<!-- FOOTER -->
<div id="4"></div>
<script>
  load("footer.html");
  function load(url) {
    req = new XMLHttpRequest()
    req.open("GET", url, false);
    req.send(null);
    document.getElementById(4).innerHTML = req.responseText;
  }
  function logout(){
    sessionStorage.clear();
    window.location.reload();
  }
  if(sessionStorage.getItem('credEmail').length>-1){
    document.getElementById('greet').innerHTML= 'Hi '+ sessionStorage.getItem('credEmail')+'.';
    SignUpForm.classList.remove('formDisp');
    SignUpForm.classList.add('formHide');
    SignInForm.classList.remove('formDisp');
    SignInForm.classList.add('formHide');
    InfoForm.classList.remove('formHide');
    InfoForm.classList.add('formDisp');
  }
  function switchCred(curr, next) {

    if (next.getAttribute('id') == 'SignInForm') {
      txnId = "L" + Math.round((Math.random()) * 10000000);
      credData.txnId = txnId
    }
    else {
      txnId = "R" + Math.round((Math.random()) * 10000000);
      credData.txnId = txnId
    }

    curr.classList.remove('formDisp');
    curr.classList.add('formHide');

    next.classList.remove('formHide');
    next.classList.add('formDisp');

  }
  async function signup() {
    let txnId = "R" + Math.round((Math.random()) * 10000000);
    let salutation = document.getElementById('salutation').value;
    let email = document.getElementById('reg_email').value;
    let password = document.getElementById('reg_password').value;
    let fname = document.getElementById('firstname').value;
    let lname = document.getElementById('lastname').value;
    let mobile = document.getElementById('mobile').value;
    let country = document.getElementById('country').value;
    let city = document.getElementById('cityid').value;
    let state = city == 'Kolkata' ? 'WB' : (city == 'Chennai' ? 'TN' : (city == 'Mumbai' ? 'MH' : (city == 'Delhi' ? 'DL' : ('KA'))))

    credData.credentials = { email, salutation, fname, lname, mobile, city, country, state };
    credData.txnId = txnId;

    sessionStorage.setItem('credEmail', credData.credentials.email)
    sessionStorage.setItem('txnId', credData.txnId)

    window.location.href='index.html';
    //await regStream({ "city": city, "country": country, "cusType": "Lead", "email": email, "firstName": fname, "lastName": lname, "mobile": mobile, "passwordEnc": password, "salutation": salutation, "state": state })

  }
</script>

</html>